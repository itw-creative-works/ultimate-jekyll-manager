<!-- Get Client ID -->
{%- assign page-adsense-client = page.resolved.advertising.google-adsense.client -%}

<!-- Determine the type of ad unit -->
{% assign type = include.type | default: "display" %}

<!-- Configure based on type -->
{% if type == "display" %}
  {% assign slot = include.slot | default: page.resolved.advertising.google-adsense.display-slot %}
  {% assign layout = "" %}
  {% assign layout-key = "" %}
  {% assign style = include.style | default: "" %}
  {% assign format = "auto" %}
  {% assign full-width-responsive = "true" %}
{% elsif type == "in-article" %}
  {% assign slot = include.slot | default: page.resolved.advertising.google-adsense.in-article-slot %}
  {% assign layout = "in-article" %}
  {% assign layout-key = "" %}
  {% assign style = include.style | default: "" %}
  {% assign format = "fluid" %}
  {% assign full-width-responsive = "" %}
{% elsif type == "in-feed" %}
  {% assign slot = include.slot | default: page.resolved.advertising.google-adsense.in-feed-slot %}
  {% assign layout = "" %}
  {% assign layout-key-input = include.layout | default: "image-above" %}
  {% if layout-key-input == "image-above" %}
    {% assign layout-key = "-6t+ed+2x-11-88" %}
  {% elsif layout-key-input == "image-side" %}
    {% assign layout-key = "-fb+5w+4e-db+86" %}
  {% else %}
    {% assign layout-key = layout-key-input %}
  {% endif %}
  {% assign style = include.style | default: "" %}
  {% assign format = "fluid" %}
  {% assign full-width-responsive = "" %}
{% elsif type == "multiplex" %}
  {% assign slot = include.slot | default: page.resolved.advertising.google-adsense.multiplex-slot %}
  {% assign layout = "" %}
  {% assign layout-key = "" %}
  {% assign style = include.style | default: "" %}
  {% assign format = "autorelaxed" %}
  {% assign full-width-responsive = "" %}
{% endif %}

{% assign vert-size = include.vert-size | default: "" %}

<!-- Inject Ad -->
{%- iftruthy page-adsense-client -%}
  <div data-lazy='@script {
    "src": "{{ site.url }}/assets/js/modules/vert.bundle.js?cb={{ site.uj.cache_breaker }}",
    "attributes": {
      "data-ad-client": "{{ page-adsense-client }}",
      "data-ad-type": "{{ type }}",
      "data-ad-slot": "{{ slot }}",
      "data-ad-layout": "{{ layout }}",
      "data-ad-layout-key": "{{ layout-key }}",
      "data-ad-style": "{{ style }}",
      "data-ad-format": "{{ format }}",
      "data-ad-size": "{{ vert-size }}",
      "data-full-width-responsive": "{{ full-width-responsive }}",
      "async": ""
    }
  }'>
  </div>
{%- endiftruthy -%}
