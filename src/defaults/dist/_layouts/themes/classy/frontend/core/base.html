---
### ALL PAGES ###
layout: core/root

### THEME CONFIG ###
theme:
  # html:
  #   class: ""
  head:
    content: |
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lexend:wght@100..900&display=swap" media="print" onload="this.media='all'">
  body:
    class: "d-flex flex-column min-vh-100"
  # main:
  #   class: "flex-fill"
---

<!-- Nav (controlled by page/layout front matter) -->
{% unless page.resolved.theme.nav.enabled == false %}
  {%- include /frontend/sections/nav.html -%}
{% endunless %}

<!-- Main Content -->
<main id="main-content" class="container flex-fill {{ page.resolved.theme.main.class | liquify }}" aria-label="Main content">
  {{ content | uj_content_format }}
</main>

<!-- Footer (controlled by page/layout front matter) -->
{% unless page.resolved.theme.footer.enabled == false %}
  {%- include /frontend/sections/footer.html -%}
{% endunless %}

<!-- Script to quickly handle nav user state -->
<script type="text/javascript">
  try {
    (function() {
      'use strict';
      // Read and parse localStorage data
      var managerData = localStorage.getItem('_manager');
      var parsedData = managerData ? JSON.parse(managerData) : null;
      var isLoggedIn = !!(parsedData && parsedData.auth && parsedData.auth.user && parsedData.auth.user.uid);

      // Quit if NOT logged in
      if (!isLoggedIn) {
        return;
      }

      // Process binds
      var $bindElements = document.querySelectorAll('[data-wm-bind]');

      $bindElements.forEach(function($el) {
        var bindValue = $el.getAttribute('data-wm-bind');

        if (bindValue === '@show auth.user') {
          // Show element when user is logged in
          $el.removeAttribute('hidden');
        } else if (bindValue === '@show !auth.user') {
          // Hide element when user is logged in (show when not logged in)
          $el.setAttribute('hidden', '');
        }
      });
    }());
  } catch (error) {
    console.error('Error occurred while selecting elements:', error);
  }
</script>
