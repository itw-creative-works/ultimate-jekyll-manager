---
### ALL PAGES ###
layout: core/root

### THEME CONFIG ###
theme:
  body:
    class: "m-0 p-0 overflow-y-auto"

### WEB MANAGER CONFIG ###
web_manager:
  auth:
    config:
      policy: "authenticated"
  cookieConsent:
    enabled: false
  chatsy:
    enabled: false
---

<!-- Main Content -->
<main id="main-content" class="p-0 {{ page.resolved.theme.main.class | liquify }}" aria-label="Main content">
  <div class="container-fluid p-0">
    {{ content | uj_content_format }}
  </div>
</main>

<!-- Notify parent frame about navigation -->
<script type="text/javascript">
  // Notify parent frame about navigation
  document.addEventListener('DOMContentLoaded', function() {
    // If we're not in an iframe, exit early
    if (window.parent === window) {
      return;
    }

    try {
      // Send current URL to parent
      window.parent.postMessage({
        command: 'uj:admin:iframe-navigation',
        payload: {
          // URL stuff for setting the href/active link in the sidebar
          url: window.location.href,
          host: window.location.host,
          pathname: window.location.pathname,

          // Configuration object from the iframe
          config: window.Configuration,

          // Meta information from the iframe
          meta: {
            title: "{{ page.resolved.meta.title | liquify | escape }}",
            description: "{{ page.resolved.meta.description | liquify | escape }}",
            breadcrumb: "{{ page.resolved.meta.breadcrumb | liquify | escape }}",
          },
        }
      }, '*');
    } catch (e) {
      console.error('Could not communicate with parent frame:', e);
    }
  });
</script>
